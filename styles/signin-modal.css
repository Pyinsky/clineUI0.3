/* styles/signin-modal.css - Adapted for static #signinModal and Perplexity style */

/* Main Modal Container (#signinModal from index.html) */
#signinModal {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    z-index: var(--z-modal); 
    display: none; /* Initially hidden, JS controls this for visibility */
    opacity: 0; /* Start fully transparent */
    transition: opacity var(--transition-normal); /* Transition for the overlay fade */
}
#signinModal.fade-in { /* Class added by JS when shown */
    opacity: 1;
}
#signinModal.fade-out { /* Class added by JS when hiding */
    opacity: 0;
}

/* Modal Backdrop (#signinBackdrop from index.html) */
#signinBackdrop {
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: rgba(0, 0, 0, 0.6); /* Perplexity-like backdrop */
    backdrop-filter: var(--blur-md);
    -webkit-backdrop-filter: var(--blur-md);
}

/* Modal Content Box (.signin-content from index.html) */
.signin-content { 
    position: fixed; 
    bottom: var(--spacing-xl);
    left: var(--spacing-xl); 
    transform: translateX(-100%); /* Initially off-screen to the left for slide-in */
    width: 360px; /* Perplexity modal width */
    max-width: calc(100vw - var(--spacing-xl) * 2);
    max-height: calc(100vh - var(--spacing-xl) * 2);
    overflow-y: auto;
    background: var(--secondary-dark); /* Darker background like Perplexity */
    border-radius: var(--radius-lg); 
    padding: var(--spacing-xl); 
    box-shadow: var(--shadow-xl); 
    z-index: calc(var(--z-modal) + 1);
    transition: transform var(--transition-normal) cubic-bezier(0.4, 0, 0.2, 1);
}

/* Animation states for .signin-content (controlled by JS adding/removing classes) */
#signinModal.fade-in .signin-content,
#signinModal.slide-from-left-anim .signin-content { /* slide-from-left-anim for bottom-left positioning */
    transform: translateX(0);
}

#signinModal.fade-out .signin-content,
#signinModal.slide-to-left-anim .signin-content { /* slide-to-left-anim for bottom-left positioning */
    transform: translateX(-100%);
}

/* Close Button (#closeSigninBtn from index.html) */
#closeSigninBtn { 
    position: absolute;
    top: var(--spacing-md); 
    right: var(--spacing-md);
    width: 32px; 
    height: 32px;
    border: none;
    background: transparent;
    border-radius: var(--radius-full);
    color: var(--text-muted); 
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: background-color var(--transition-fast), color var(--transition-fast);
}
#closeSigninBtn:hover {
    background: var(--hover-bg);
    color: var(--text-primary);
}
#closeSigninBtn svg { /* Ensure SVG inside button is sized */
    width: 18px;
    height: 18px;
}

/* Modal Header (.signin-header from index.html) */
.signin-content .signin-header {
    text-align: center;
    margin-bottom: var(--spacing-lg); 
}
.modal-logo-icon { 
    color: var(--text-primary); 
    margin-bottom: var(--spacing-md);
    width: 28px; 
    height: 28px; 
}
.signin-content .signin-header h2 { 
    font-size: var(--font-size-lg); 
    font-weight: 600;
    color: var(--text-primary);
    margin: 0 0 var(--spacing-xs) 0;
    line-height: 1.3;
}
.signin-content .signin-header p { 
    font-size: var(--font-size-sm); 
    color: var(--text-secondary);
    margin: 0;
    line-height: 1.4;
}

/* Sign-In Body & Options (.signin-body, .social-signin-btn, .email-form from index.html) */
.signin-content .signin-body {
    display: flex;
    flex-direction: column;
    gap: var(--spacing-sm); 
    margin-bottom: var(--spacing-lg);
}
.social-signin-btn, .email-btn { 
    display: flex; 
    align-items: center; 
    justify-content: center; 
    gap: var(--spacing-sm); 
    width: 100%; 
    height: 48px; 
    padding: 0 var(--spacing-md); 
    border-radius: var(--radius-md); 
    font-size: var(--font-size-sm); 
    font-weight: 500; 
    cursor: pointer; 
    transition: background-color var(--transition-fast), border-color var(--transition-fast), transform var(--transition-fast);
    border: 1px solid var(--border-color); /* Default border */
}
.social-signin-btn:focus-visible, .email-btn:focus-visible { 
    outline: none;
    border-color: var(--accent-color);
    box-shadow: 0 0 0 3px rgba(79, 156, 249, 0.3);
}
.social-signin-btn:active, .email-btn:active {
    transform: scale(0.98);
}

.google-btn { /* ID from index.html */
    background: var(--tertiary-dark); /* Darker buttons like Perplexity */
    color: var(--text-primary); 
}
.google-btn:hover { background: var(--hover-bg); border-color: var(--border-hover); }

.apple-btn { /* ID from index.html */
    background: var(--tertiary-dark);
    color: var(--text-primary);
}
.apple-btn:hover { background: var(--hover-bg); border-color: var(--border-hover); }

.social-signin-btn svg { /* SVG inside social buttons */
    margin-right: var(--spacing-sm); /* Already present in index.html, this is for consistency */
}

.email-signin-divider {
    display: flex;
    align-items: center;
    text-align: center;
    color: var(--text-muted);
    font-size: var(--font-size-xs);
    margin: var(--spacing-sm) 0;
}
.email-signin-divider::before,
.email-signin-divider::after {
    content: '';
    flex: 1;
    border-bottom: 1px solid var(--border-color);
}
.email-signin-divider:not(:empty)::before { margin-right: .5em; }
.email-signin-divider:not(:empty)::after { margin-left: .5em; }

.signin-email-input { /* ID from index.html */
    width: 100%;
    padding: var(--spacing-md);
    background: var(--secondary-dark); /* Slightly lighter than modal bg */
    border: 1px solid var(--border-color);
    border-radius: var(--radius-md);
    color: var(--text-primary);
    font-size: var(--font-size-sm);
    margin-bottom: var(--spacing-sm);
}
.signin-email-input:focus {
    border-color: var(--accent-color);
    box-shadow: 0 0 0 3px rgba(79, 156, 249, 0.2);
    outline: none;
}

.email-btn { /* For "Continue with email" button */
    background: var(--tertiary-dark); /* Consistent with other buttons */
    color: var(--text-primary);
}
.email-btn:hover { background: var(--hover-bg); border-color: var(--border-hover); }

/* Footer (.signin-footer from index.html) */
.signin-content .signin-footer {
    text-align: center;
    /* border-top: 1px solid var(--border-color); */ /* Perplexity doesn't have a top border here */
    padding-top: var(--spacing-sm); /* Reduced padding */
    margin-top: var(--spacing-lg);
}
.signin-content .signin-footer p { 
    font-size: var(--font-size-xs);
    color: var(--text-secondary);
    margin: 0;
    line-height: 1.5;
}
.signin-content .signin-footer a { 
    color: var(--text-secondary); 
    text-decoration: underline;
    font-weight: normal; /* Perplexity links are not bold */
}
.signin-content .signin-footer a:hover {
    color: var(--text-primary);
}

/* Mobile Optimizations for the #signinModal structure */
@media (max-width: 768px) {
    .signin-content { 
        right: 50%; /* Center on mobile */
        transform: translate(50%, -50%) translateX(100vw); /* Start off-screen for mobile */
        width: calc(100% - var(--spacing-lg) * 2); 
        max-width: 380px; 
    }

    #signinModal.fade-in .signin-content,
    #signinModal.slide-from-right-anim .signin-content {
        transform: translate(50%, -50%) translateX(0); /* Slide in to center */
    }

    #signinModal.fade-out .signin-content,
    #signinModal.slide-to-right-anim .signin-content {
        transform: translate(50%, -50%) translateX(100vw); /* Slide out */
    }
}

@media (max-width: 480px) {
    .signin-content {
        padding: var(--spacing-lg);
    }
    .signin-content .signin-header h2 { font-size: var(--font-size-lg); }
    .signin-content .signin-header p { font-size: var(--font-size-xs); }
    .social-signin-btn, .email-btn { height: 44px; font-size: var(--font-size-sm); }
    .signin-email-input { padding: var(--spacing-sm); font-size: var(--font-size-sm); }
}

/* Reduce motion for accessibility */
@media (prefers-reduced-motion: reduce) {
    #signinModal, .signin-content, .social-signin-btn, .email-btn {
        transition: none !important;
        animation: none !important;
    }
}

/* Loading states for buttons */
.social-signin-btn.loading, .email-btn.loading {
    pointer-events: none;
    opacity: 0.7;
}
.social-signin-btn.loading::after, .email-btn.loading::after {
    content: '';
    position: absolute;
    width: 18px;
    height: 18px;
    border: 2px solid transparent;
    border-top-color: currentColor; 
    border-radius: 50%;
    animation: spin 0.8s linear infinite; /* spin is in animations.css */
    right: var(--spacing-md); 
    top: 50%;
    margin-top: -9px; 
}

/* Safe area support for mobile devices */
@supports (padding: max(0px)) {
    .signin-content {
        padding-left: max(var(--spacing-xl), env(safe-area-inset-left));
        padding-right: max(var(--spacing-xl), env(safe-area-inset-right));
        padding-bottom: max(var(--spacing-xl), env(safe-area-inset-bottom));
    }
    @media (max-width: 480px) {
        .signin-content {
            padding-left: max(var(--spacing-lg), env(safe-area-inset-left));
            padding-right: max(var(--spacing-lg), env(safe-area-inset-right));
            padding-bottom: max(var(--spacing-lg), env(safe-area-inset-bottom));
        }
    }
}

/* Print styles */
@media print {
    #signinModal {
        display: none !important;
    }
}
